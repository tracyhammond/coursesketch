<html>
<head>
<meta charset="utf-8">
<title>Command Methods test</title>
<!-- test Library -->
<link rel="import" href="/test/testUtilities/fakePage/fakePageInclude.html">
    <link rel="import"
          href="/test/testUtilities/fakePage/fakeTestData/fakeTestDataInclude.html">
    <script src="/test/testUtilities/databaseHelper.js"></script>

<!-- files needed for testing -->
<link rel="import" href="/src/instructor/gradebook/instructorGradebook.html" data-fake>

</head>
<body>
<script>
    CourseSketch.dataManager.waitForDatabase(function() {
        CourseSketch.dataManager.addState('gradebookCourseid', '8');

		var assignmentList = [];
		for (var i = 0; i < 10; i++) {
			assignmentList.push('' + (i + 11));
		}

        var studentList = ["student1", "stud2", "gilbert", "gabby", "student5", "student6",
        "matt", "stud8", "stud9", "stud10"];

        var idToNameMap = new Map();
        for (var i = 0; i < studentList.length; i++) {
            idToNameMap.set(studentList[i], studentList[i].toUpperCase());
        }

        CourseSketch.dataManager.getCourseRoster = function(courseId, callback) {
            //var studentRoster = studentList.concat('noGradeStudnet', 'noGrade2', 'failure');
            var studentRoster = idToNameMap;
            studentRoster.set('noGradeStudent', 'NOGRADESTUDENT');
            studentRoster.set('noGrade2', 'NOGRADE2');
            studentRoster.set('failure', 'FAILURE');
            callback(studentRoster);
        };

        CourseSketch.dataManager.getAllAssignmentGrades = function(courseId, callback) {
            var gradeList = [];
            var grade = CourseSketch.prutil.ProtoGrade();
            grade.courseId = courseId;
            grade.userId = studentList[0];
            grade.assignmentId = assignmentList[0];
            grade.currentGrade = 70;
            gradeList.push(grade);

            var grade = CourseSketch.prutil.ProtoGrade();
            grade.courseId = courseId;
            grade.userId = studentList[1];
            grade.assignmentId = assignmentList[0];
            grade.currentGrade = 99;
            gradeList.push(grade);

            var grade = CourseSketch.prutil.ProtoGrade();
            grade.courseId = courseId;
            grade.userId = studentList[3];
            grade.assignmentId = assignmentList[0];
            grade.currentGrade = 105;
            gradeList.push(grade);

            var grade = CourseSketch.prutil.ProtoGrade();
            grade.courseId = courseId;
            grade.userId = studentList[0];
            grade.assignmentId = assignmentList[1];
            grade.currentGrade = 80;
            gradeList.push(grade);

            var grade = CourseSketch.prutil.ProtoGrade();
            grade.courseId = courseId;
            grade.userId = studentList[1];
            grade.assignmentId = assignmentList[1];
            grade.currentGrade = 50;
            gradeList.push(grade);

            var grade = CourseSketch.prutil.ProtoGrade();
            grade.courseId = courseId;
            grade.userId = studentList[2];
            grade.assignmentId = assignmentList[1];
            grade.currentGrade = 98;
            gradeList.push(grade);

            var grade = CourseSketch.prutil.ProtoGrade();
            grade.courseId = courseId;
            grade.userId = studentList[1];
            grade.assignmentId = assignmentList[2];
            grade.currentGrade = 95;
            gradeList.push(grade);

            for (var i = 4; i < studentList.length; i++) {
                for (var j = 0; j < assignmentList.length; j++) {
                    var grade = CourseSketch.prutil.ProtoGrade();
                    grade.courseId = courseId;
                    grade.userId = studentList[i];
                    grade.assignmentId = assignmentList[j];
                    grade.currentGrade = Math.random() * 100;
                    gradeList.push(grade);
                }
            }

            callback(gradeList);
        };
    });
</script>
</body>
