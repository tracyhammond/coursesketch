<html>
<head>
    <meta charset="utf-8">
    <title>problemNavigator methods test</title>
    <!-- test Library -->
    <link rel="import" href="/test/testUtilities/testUtilities.html">
        <link rel="import"
              href="/test/testUtilities/fakePage/fakePageInclude.html">
        <link rel="import"
              href="/test/testUtilities/fakePage/fakeTestData/fakeTestDataInclude.html">

    <!-- files needed for testing -->
    <link rel="import" href="/src/common/navigation/problem/navigationPanelInclude.html">

    <!-- file being tested. -->
    <script src="/src/common/navigation/problem/problemNavigator.js" data-cover></script>
</head>
<body>
<div id="qunit"></div>
<div id="qunit-fixture"></div>


<script>
    CourseSketch.dataManager.getAssignment = function(assignmentID, callback) {
        if (assignmentID == "randomTest1234") {
            callback(CourseSketch.fakeAssignments[9]);
        } else {
            callback(CourseSketch.fakeAssignments[1]);
        }
    }
</script>
<script>
        QUnit.module("navigation index changing");
        test("randomAssignment", function(assert) {
            var testNavigator = new ProblemNavigator("randomTest1234", false, 0);
            var index = testNavigator.getCurrentNumber();
            console.log(testNavigator);
            testNavigator.gotoNext();
            assert.notEqual(undefined, testNavigator.getCurrentNumber(), "testing randomness");
            assert.notEqual(index, testNavigator.getCurrentNumber(), "testing randomness");
        });

        test("gradedAssignmentNavigationForward", function(assert) {
            var testNavigator = new ProblemNavigator("graded", false, 0);
            var index = testNavigator.getCurrentNumber();
            console.log(testNavigator);
            testNavigator.gotoNext();
            assert.equal(index + 1, testNavigator.getCurrentNumber(), "testing that this assignment is in face correctly moving over");
        });

        test("gradedAssignmentNavigationPrevious", function(assert) {
            var testNavigator = new ProblemNavigator("graded", false, 0);
            var index = testNavigator.getCurrentNumber();
            console.log(testNavigator);
            testNavigator.gotoNext();
            assert.equal(index + 1, testNavigator.getCurrentNumber(), "testing that this assignment is in face correctly moving over");

            testNavigator.gotoPrevious()
            assert.equal(index, testNavigator.getCurrentNumber(), "testing that this assignment is in face correctly moving over");
        });

        test("goToProblem", function(assert) {
            var testNavigator = new ProblemNavigator("graded", false, 0);
            var index = testNavigator.getCurrentNumber() - 1;
            console.log(testNavigator);
            testNavigator.goToProblem(index + 1);
            assert.equal(index + 1, testNavigator.getCurrentNumber() - 1, "testing that this assignment is in face correctly moving over");
        });
</script>
</body>
