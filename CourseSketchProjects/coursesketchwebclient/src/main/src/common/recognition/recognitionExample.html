<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Recognition Example</title>
    <link rel="import"
          href="/src/utilities/libraries/materialize/materializeInclude.html">

    <!-- basic utilities -->
    <link rel="import" href="/src/utilities/defaultUtils.html">
    <script type="text/javascript" src="/src/utilities/functions/childScript.js"
            data-namespace="courseManagement"></script>

    <!-- protobuf -->
    <link rel="import" href="/src/utilities/connection/protobufInclude.html">

    <!-- special elements -->
    <link rel="import" href="/src/sketching/sketchInclude.html">
    <script src="/src/common/recognition/recognitionManager.js"></script>

</head>
<body>
<div style="height: 600px;position: relative;">
    <sketch-surface id="hello" style="height: 100%; border: 5px solid red;"></sketch-surface>
    <input type="text" />
    <button>Submit Template</button>
</div>
    <script>
        $(document).ready(function() {
            var elements = document.getElementsByTagName('sketch-surface');
            console.log(elements);
            var sketchSurface = elements[0];
            var updateManager = sketchSurface.getUpdateManager();
            updateManager.addPlugin(CourseSketch.createRecognitionPlugin(updateManager, sketchSurface.id));
            var resized = false;
            updateManager.addPlugin({
                addUpdate: function() {
                    if (!resized) {
                        sketchSurface.resizeSurface();
                        resized = true;
                    }
                }
            });
            sketchSurface.resizeSurface();
            $('button').click(function() {
                var sketch = sketchSurface.getCurrentSketch();
                var protoBuf = sketch.sendToProtobuf();
                var label = 'line';
                CourseSketch.recognition.addSketchTemplate(label, protoBuf, function(err, success) {
                   console.log(err, success);
                });
            });
        });
    </script>
</body>
</html>
