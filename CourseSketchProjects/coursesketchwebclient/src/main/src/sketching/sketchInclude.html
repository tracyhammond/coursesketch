<html>
<head>
<!-- Utilities -->
<script src="/src/utilities/base.js"></script>
<script src="/src/utilities/objectAndInheritance.js"></script>
<link rel="import" href="/src/utilities/includes/protobufInclude.html">

<!-- Srl library -->
<link rel="import" href="srl/srlLibraryInclude.html">

<!-- adapters -->
<script src="adapters/sketchToProtobufAdapter.js"></script>

<!-- input -->
<script src="input/touch_event.js"></script>
<script src="input/sketchingEventConverter.js"></script>

<!-- sketch surface -->
<link id="sketchSurfaceImport" rel="import"
	href="/src/sketching/sketchSurface.html">
<script src="sketchSurface.js"></script>
<script src="sketchSurfaceManager.js"></script>
<meta charset="UTF-8">
<script>
    var importDoc = document.currentScript.ownerDocument;
    window.addEventListener('load', function() {
        console.log("WHAT?");

        console.log(event);
        var link = importDoc.querySelector('#sketchSurfaceImport');
        console.log("LINK");
        console.log(link);
        var importStuff = link.import;
        console.log("import");
        console.log(importStuff);
        var template = link.import.querySelector('template');

        var newElement = new SketchSurface();

        newElement.createdCallback = function() {
            // import template into
            var clone = document.importNode(template.content, true);

            var root = this.createShadowRoot();
            this.setRoot(root);
            root.appendChild(clone);
            this.initialize(InputListener, SketchEventConverter);
        };

        document.registerElement('sketch-surface', {
            prototype : newElement
        });
    }, false);
</script>
</head>
</html>
