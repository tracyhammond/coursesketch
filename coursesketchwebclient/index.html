<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Welcome!</title>
    <script type="text/javascript" src="js/connection/connection_library.js"></script>
   	<script type="text/javascript" src="js/utils/loadingManager.js"></script>
    <link rel="icon" type="image/ico" href="images/CSpencil.ico">
	<style>
	html, body {
	    margin: 0px;
	    padding: 0px;
	    border: 0px;
	    width: 100%;
	    height: 100%;
	}
	</style>
	<script>
	//	var wsUri = "echo.websocket.org/"; // echo server
	//var wsUri = "goldberglinux.tamu.edu:8887"; // our server
	var wsUri = "localhost:8887"; // local server
	var connection = new Connection(wsUri,false);
	connection.setOnCloseListener(function(evt) {
		if (evt.code == CONNECTION_LOST) {
			alert('can not connect to the server');
		} else if(evt.code == SERVER_FULL) {
			alert(evt.reason); // Here we can try to connect to other servers.
		}
	});
	function Redirector(scope) {
		var scope = scope;
		var activeState = false;
		/**
		Sets the hash url to the file location.
		
		This allows us to find the url if something were to happen.
		*/
		this.setRedirect = function setRedirect(url) {
			var shortUrl = replaceAll('html','',url); // Remove html from file ending
			var hashUrl = replaceAll('/','.',shortUrl);
			var trimmedHash = hashUrl.substring(1,hashUrl.length-1); // Trim ending
			var replacedHash = ('' + window.location).split('#')[0] + '#' + trimmedHash;
			scope.location.replace(replacedHash);
		}

		function replaceAll(find, replace, str) {
			  return str.replace(new RegExp(find, 'g'), replace);
		}

		this.getRedirect = function getRedirect() {
			var starting = scope.location.hash.substring(1);
			var addedSlashes = 'html/' + replaceAll('\\.','/',starting) + '.html';
			return addedSlashes;
		}

		this.addState = function addState() {
			if (activeState) {
				return;
			}
			activeState = true;
			window.location.hash
		}
		
		this.getState = function addState() {
			
		}
		
		this.removeState = function addState() {
			
		}

		this.replaceState = function addState() {
			
		}
	}
	var redirector = new Redirector(window);
	window.onload = function() {
		//redirector.setRedirect('html/login/login.html');
	}
	</script>
</head>
<body>
<iframe id="iframeContent" width = "100%" height = "100%" src = "html/login/login.html" frameborder="0" style="display:block"></iframe>
</body>
</html>