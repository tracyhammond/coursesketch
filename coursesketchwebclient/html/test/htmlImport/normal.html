<html>
<head>
	<base href="../../../">
	<script type="text/javascript" src="js/utils/loadingManager.js"></script>
	<style>
	.commonClass {
		height: 200px;
		widht: 200px;
		background-color:#000000;
	}
	</style>
	<script>
		var loader = new parent.DynamicFileLoader(this.document);
		loader.sope = document;
		function importHTML(src) {
			var htmlLocation = "editContent";
			var toReplace = document.getElementById('editable_unit');
			if (toReplace.dataset.src == src) {
				//alert("This type of control already exist");
				return; // exit early we do not need to change anything
			}

			function onload(event) {
				console.log("Onload was called");
				toReplace.dataset.src = src;
				var link = event.srcElement;
				console.log("link");
				console.log(link);
				var importedData = link.import.querySelector("#" + htmlLocation) || link.import.getElementById(htmlLocation);
				console.log(importedData);
				if (src && importedData) {
					var shadow = toReplace.createShadowRoot();
					var clone = document.importNode(importedData.content, true);
					shadow.appendChild(clone);
					setHostValues(shadow);
				} else {
					toReplace.innerHTML = '<h2 style = "text-align:center">Nothing is selected yet</h2>' +
					'<h2 style = "text-align:center">Click an item to edit</h2>';
				}
			}

			function onerror(event) {
				toReplace.dataset.src = src;
				console.log(event);
				var toReplace = document.getElementById('editable_unit');
				toReplace.innerHTML = '<h2 style = "text-align:center">An error occured</h2>' +
				'<h2 style = "text-align:center">An error occured</h2>';
			}

			try {
				loader.replaceFile(false, src, "html", onload, onerror, 'editable_import', 'editable_import');
			} catch(exception) {
				//console.log(exception.stack);
				loader.loadFile(src, "html", onload, onerror, 'editable_import');
			}
		}
	</script>
	<script>
		function hosint() {
			var host = document.getElementById('editable_unit');
			alert(host);
			setHostValues(host);
		}
	</script>
</head>
<body>
	<div class="commonClass"></div>
	<button onclick="importHTML('html/test/htmlImport/toImport.html');">import button</button>
	<button onclick="hosint();">host button</button>
	<div id="editable_unit"></div>
</body>
</html>