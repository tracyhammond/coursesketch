<!DOCTYPE html>
<html class="ui-mobile"><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<base href="../../">
    <title>Drawing!</title>
  	<link rel="stylesheet" href="css/utility/columns.css">
	<link rel="stylesheet" href="css/SRL/SRL_SketchViewer.css">

    <script type="text/javascript" src="js/utils/loadingManager.js"></script>
    <script type="text/javascript" src="js/utils/utilityFunctions.js"></script>
    <script type="text/javascript" src="js/connection/connection_library.js"></script>
	<script type="text/javascript" src="js/connection/command_manager.js"></script>

	<script type="text/javascript" src="js/input/drawing.js"></script>
	<script type="text/javascript" src="js/SRL/SRL_Library.js"></script>
	<script type="text/javascript" src="js/input/touch_event.js"></script>
	<script type="text/javascript" src="js/SRL/SRL_Graphics.js"></script>

	<script type="text/javascript" src="js/SRL/SRL_SketchViewer.js"></script>
    <link rel="icon" type="image/ico" href="images/CSpencil.ico">
    <script type="text/javascript">
		var drawingCreator = false;
		var sketch = false;
		var canvasContext = false;
		var commandManger = false;
		var connection = false;
	    addLoadEvent(function () {
			var input = new inputListener();
			input.initializeCanvas("drawingCanvas");
			canvasContext = input.canvasContext;
			sketch = new sketchContainer();
			drawingCreator = new drawingInputCreator(input, sketch, callback, canvasContext);
			createStuff();
			initializeServer();
		});

	    function callback() {
		//	element = document.getElementById('output');
			var html = "";
			var list = sketch.getList();

			createSketchViewer(list, 'output');

			for(var i = 0; i < list.length; i++) {
				var object = list[i];
				object.setColorHex(convertRGBtoHex(0,255,0,255));
				object.draw(canvasContext);
			}
		//	element.innerHTML = html;
		}

	    function createStuff() {
	    	//goes 5 times
	    	for(var i = 1; i <= 2; i++) {
	    		sketch.addObject(getShape(i));
	    	}
	    	console.log(sketch.getList());
	    	var list = sketch.getList();
	    	createSketchViewer(list, 'output');
	    }

	    function getShape(i) {
	    	this.shape = new SRL_Shape();
    		// goes 1 to 5 times
    		for(var j = 0; j < i; j++) {
    			console.log('j: '+ j);
    			var stroke = new SRL_Stroke();
    			this.shape.addSubObject(stroke);
    		}
    		return shape;
	    }

	    function packageShapes() {
	    	var shape = new SRL_Shape();
	    	var list = sketch.getList();
	    	for(var i = 0; i < list.length; i ++) {
	    		shape.addSubObject(sketch.getObjectAtIndex(i));
	    	}
	    	sketch.addObject(shape);
	    	createSketchViewer(sketch.getList(), 'output');
	    }

	    function removeFirst() {
	    	sketch.removeObjectAtIndex(0);
	    	createSketchViewer(sketch.getList(), 'output');
	    }
	</script>
</head>
<body>
	version 5
    <!-- Center Section -->
   	<div class = "centre">
   			<button onclick = "createStuff();">addShape</button>
   			<button onclick = "packageShapes();">packageSketch</button>
   			<button onclick = "removeFirst();">removeFirst</button>
   			<div id = "output" style = "height:100px;position:relative;"></div>
  			<canvas id="drawingCanvas" width="300" height="300" style="top:0px; left:0px; width: 300; height: 300; background:#FFFFFF;"></canvas>
   	</div>
</div>