<!DOCTYPE html>
<html>
<head>
<base href="../../">
  	<link rel="stylesheet" href="css/utility/columns.css">
  	<link rel="stylesheet" href="css/problem/problem_layout.css">

	<script type="text/javascript" src="js/problem/problem_navigator.js"></script>
	<script type="text/javascript">
		var connection;
		if (parent) {
			parent.copyParentUtilityFunctions(this);
			parent.copyParentProtos(this);
			connection = parent.connection;
		}
	</script>
	<script>
		var problemNavigator = new schoolNavigator(parent.dataManager.getState("CURRENT_ASSIGNMENT"),parent.dataManager, false);
	</script>
	<script>
	(function(scriptScope) {
		scriptScope.loadNav = function(callerScope) {
			callerScope.document.getElementById("panelWrapper").onresize = function() {
				if (this.offsetHeight > 100) {
					alert("resiszing iframe");
					scriptScope.setHeightToContent(scriptScope, "nav_iframe", "panelWrapper", 5);
				}
			};
			callerScope.document.getElementById("panelWrapper").onresize();
		}
		problemNavigator.addCallback(function (nav) {
			var type = nav.getPoblemType();
			var panelLoc = "default";
			// type may change to be an int or an enum comparison.
			if (type == "SKETCH") {
				panelLoc = "sketching";
			}  else if (type == "MULT_CHOICE") {
				panelLoc = "multipleChoice"
			}   else if (type == "FREE_RESP") {
				panelLoc = "essay";
			}
			scriptScope.document.getElementById('problem_iframe').src = "/html/problem/problemType/" + panelLoc + "Panel.html";
			fillHeight(scriptScope, 'problem_iframe');
		});
		scriptScope.window.onresize = function() {
			fillHeight(scriptScope, 'problem_iframe');
		}
	})(this);
	function onLoad() {
		problemNavigator.refresh();
		window.onresize();
	}
	</script>
</head>
<body onload="onLoad();">
	<!-- include navigation panel here! -->
	<iframe id = "nav_iframe" src= "/html/problem/navigationPanel.html" scrolling="no" frameborder="0" width=100% style = "width:100%;" height = 100px;></iframe>

	<!-- include problem panel here! -->
	<iframe id = "problem_iframe" src = "/html/problem/problemType/defaultPanel.html" frameborder="0" width=100% height=100% style ="width:100%;height:100%;"></iframe>

	<div id = "tool_panel">
	<!-- include panel for tools here! -->
	</div>
</body>
</html>